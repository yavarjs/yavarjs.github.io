<!doctype html><html dir=rtl lang=fa><head><title>مشکلات URL و URLSearchParams | یاvar</title>
<meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="بررسی تفاوت‌های ریزی که حین کار با URLها باعث به وجود آمدن باگ‌های غیرمنتظره می‌شود."><meta name=generator content="Hugo 0.139.2"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><meta name=author content="حمیدرضا مهدوی پناه"><meta name=keywords content="js,جاوااسکریپت,URLSearchParams,URL,node.js,url,typescript,javascript,typescript,node.js"><link href=https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v28.0.0/dist/font-face.css rel=stylesheet type=text/css><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=https://yavarjs.ir/css/custom.css><link rel="shortcut icon" href=/images/favicon.ico type=image/x-icon><script async src="https://www.googletagmanager.com/gtag/js?id=G-TB5X9PJPXB"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-TB5X9PJPXB")}</script></head><body><nav class=navigation><a href=/>خانه <span class=arrow>→</span></a>
<a href=/tags>برچسب‌ها</a>
<a href=/about>درباره یاvar</a></nav><main class=main><section id=single><h1 class=title>مشکلات URL و URLSearchParams</h1><div class=tip><span>حمیدرضا مهدوی پناه
</span><span class=split>·
</span><span>خواندن 4 دقیقه
</span><span class=split>·
</span><span>671 کلمه
</span><span class=split>·
</span><span>۱۴۰۳/۹/۲</span></div><aside class=toc><details><summary>فهرست</summary><div><nav id=TableOfContents><ul><li><a href=#همه-چیز-از-یک-باگ-شروع-شد>همه چیز از یک باگ شروع شد</a></li><li><a href=#مشکل-مدیریت-url-با-axios>مشکل: مدیریت URL با Axios</a><ul><li><a href=#مشکل-شماره-1-تفاوت-بین-urlsearch-و-urlsearchparamstostring>مشکل شماره 1: تفاوت بین <code>URL.search</code> و <code>()URLSearchParams.toString</code></a></li><li><a href=#مشکل-شماره-2-چالش-علامت-بعلاوه>مشکل شماره 2: چالش علامت بعلاوه</a></li><li><a href=#مشکل-شماره-3-urlsearchparamsget-در-مقابل-urlsearchparamstostring>مشکل شماره 3: <code>URLSearchParams.get</code> در مقابل <code>()URLSearchParams.toString</code></a></li></ul></li><li><a href=#راهحل-در-کد-ما>راه‌حل در کد ما</a></li><li><a href=#ماژول-querystring-در-nodejs>ماژول <code>querystring</code> در Node.js</a></li><li><a href=#نکات-کلیدی>نکات کلیدی</a></li></ul></nav></div></details></aside><div class=content><p>بررسی تفاوت‌های ریزی که حین کار با URLها باعث به وجود آمدن باگ‌های غیرمنتظره می‌شود.</p><h2 id=همه-چیز-از-یک-باگ-شروع-شد>همه چیز از یک باگ شروع شد <a href=#%d9%87%d9%85%d9%87-%da%86%db%8c%d8%b2-%d8%a7%d8%b2-%db%8c%da%a9-%d8%a8%d8%a7%da%af-%d8%b4%d8%b1%d9%88%d8%b9-%d8%b4%d8%af class=anchor>🔗</a></h2><p>کار با URL‌ها در JavaScript و Node.js باید ساده باشد، اما یک باگ اخیر در پروژه ما، من را به دنیایی از جزئیات پیچیده در <a href=https://nodejs.org/api/url.html target=_blank rel=noopener>API‌های <code>URL</code> و <code>URLSearchParams</code></a> برد. در این پست، به بررسی این جزئیات و مشکلات احتمالی آن‌ها در کد و نحوه اجتناب از آن‌ها خواهیم پرداخت.</p><hr><h2 id=مشکل-مدیریت-url-با-axios>مشکل: مدیریت URL با Axios <a href=#%d9%85%d8%b4%da%a9%d9%84-%d9%85%d8%af%db%8c%d8%b1%db%8c%d8%aa-url-%d8%a8%d8%a7-axios class=anchor>🔗</a></h2><p>ما این مشکل را هنگام تولید URL‌ها و اضافه کردن امضا‌های هش به آن‌ها پیدا کردیم. پارامترهای کوئری به طور یک‌پارچه percent-encode نمی‌شدند که منجر به رفتار غیرمنتظره و امضا‌های هش اشتباه می‌شد.</p><p>واضح شد که تعامل بین اشیای <code>URL</code> و <code>URLSearchParams</code> نیاز به دقت بیشتری دارد.</p><hr><h3 id=مشکل-شماره-1-تفاوت-بین-urlsearch-و-urlsearchparamstostring>مشکل شماره 1: تفاوت بین <code>URL.search</code> و <code>()URLSearchParams.toString</code> <a href=#%d9%85%d8%b4%da%a9%d9%84-%d8%b4%d9%85%d8%a7%d8%b1%d9%87-1-%d8%aa%d9%81%d8%a7%d9%88%d8%aa-%d8%a8%db%8c%d9%86-urlsearch-%d9%88-urlsearchparamstostring class=anchor>🔗</a></h3><p>اولین شگفتی تفاوت بین <code>URL.search</code> و <code>()URLSearchParams.toString</code> بود.</p><p>هنگام استفاده از <code>searchParams.</code> برای تغییر <code>URL</code>، دقت کنید، زیرا طبق <a href=https://url.spec.whatwg.org/ target=_blank rel=noopener>مشخصات WHATWG</a> ، شیء <code>URLSearchParams</code> از قوانین متفاوتی برای تعیین اینکه کدام کاراکترها باید percent-encode شوند استفاده می‌کند. به عنوان مثال، شیء <code>URL</code> کاراکتر تیلد ASCII (<code>~</code>) را percent-encode نمی‌کند، در حالی که <code>URLSearchParams</code> همیشه آن را encode می‌کند.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-1> 1</a></span><span><span style=color:#998;font-style:italic>// Example 1
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-2> 2</a></span><span><span style=color:#998;font-style:italic></span><span style=color:#000;font-weight:700>const</span> url <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>new</span> URL(<span style=color:#d14>&#34;https://example.com?param=foo bar&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-3> 3</a></span><span>console.log(url.search) <span style=color:#998;font-style:italic>// prints param=foo%20bar
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-4> 4</a></span><span><span style=color:#998;font-style:italic></span>console.log(url.searchParams.toString()) <span style=color:#998;font-style:italic>// prints ?param=foo+bar
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-5> 5</a></span><span><span style=color:#998;font-style:italic></span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-6> 6</a></span><span><span style=color:#998;font-style:italic>// Example 2
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-7> 7</a></span><span><span style=color:#998;font-style:italic></span><span style=color:#000;font-weight:700>const</span> myURL <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>new</span> URL(<span style=color:#d14>&#34;https://example.org/abc?foo=~bar&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-8> 8</a></span><span>console.log(myURL.search) <span style=color:#998;font-style:italic>// prints ?foo=~bar
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-9> 9</a></span><span><span style=color:#998;font-style:italic>// Modify the URL via searchParams...
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-10>10</a></span><span><span style=color:#998;font-style:italic></span>myURL.searchParams.sort()
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-11>11</a></span><span>console.log(myURL.search) <span style=color:#998;font-style:italic>// prints ?foo=%7Ebar
</span></span></span></code></pre></div><p>در پروژه ما، لازم بود به طور صریح <code>()url.search = url.searchParams.toString</code> را دوباره اختصاص دهیم تا اطمینان حاصل شود که رشته کوئری به طور یکنواخت encode شده است.</p><hr><h3 id=مشکل-شماره-2-چالش-علامت-بعلاوه>مشکل شماره 2: چالش علامت بعلاوه <a href=#%d9%85%d8%b4%da%a9%d9%84-%d8%b4%d9%85%d8%a7%d8%b1%d9%87-2-%da%86%d8%a7%d9%84%d8%b4-%d8%b9%d9%84%d8%a7%d9%85%d8%aa-%d8%a8%d8%b9%d9%84%d8%a7%d9%88%d9%87 class=anchor>🔗</a></h3><p>یکی دیگر از نکات ظریف این است که چگونه <code>URLSearchParams</code> با کاراکترهای <code>+</code> برخورد می‌کند. به طور پیش‌فرض، <code>URLSearchParams</code> کاراکتر <code>+</code> را به عنوان فضای خالی تفسیر می‌کند که ممکن است هنگام encode داده‌های باینری یا رشته‌های Base64 منجر به خرابی داده‌ها شود.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-1>1</a></span><span><span style=color:#000;font-weight:700>const</span> params <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>new</span> URLSearchParams(<span style=color:#d14>&#34;bin=E+AXQB+A&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-2>2</a></span><span>console.log(params.<span style=color:#000;font-weight:700>get</span>(<span style=color:#d14>&#34;bin&#34;</span>)) <span style=color:#998;font-style:italic>// &#34;E AXQB A&#34;
</span></span></span></code></pre></div><p>یک راه حل این است که قبل از افزودن مقادیر به <code>URLSearchParams</code> از <code>encodeURIComponent</code> استفاده کنید:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-1>1</a></span><span>params.append(<span style=color:#d14>&#34;bin&#34;</span>, <span style=color:#0086b3>encodeURIComponent</span>(<span style=color:#d14>&#34;E+AXQB+A&#34;</span>))
</span></span></code></pre></div><p>جزئیات بیشتر در <a href=https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams#preserving_plus_signs target=_blank rel=noopener>مستندات MDN</a> موجود است.</p><hr><h3 id=مشکل-شماره-3-urlsearchparamsget-در-مقابل-urlsearchparamstostring>مشکل شماره 3: <code>URLSearchParams.get</code> در مقابل <code>()URLSearchParams.toString</code> <a href=#%d9%85%d8%b4%da%a9%d9%84-%d8%b4%d9%85%d8%a7%d8%b1%d9%87-3-urlsearchparamsget-%d8%af%d8%b1-%d9%85%d9%82%d8%a7%d8%a8%d9%84-urlsearchparamstostring class=anchor>🔗</a></h3><p>یکی دیگر از جزئیات ظریف زمانی به وجود می‌آید که خروجی‌های <code>URLSearchParams.get</code> و <code>URLSearchParams.toString</code> را مقایسه می‌کنید. به عنوان مثال:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-1>1</a></span><span><span style=color:#000;font-weight:700>const</span> params <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>new</span> URLSearchParams(<span style=color:#d14>&#34;?key=value&amp;key=other&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-2>2</a></span><span>console.log(params.<span style=color:#000;font-weight:700>get</span>(<span style=color:#d14>&#34;key&#34;</span>)) <span style=color:#998;font-style:italic>// &#34;value&#34; (اولین مورد)
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-3>3</a></span><span><span style=color:#998;font-style:italic></span>console.log(params.toString()) <span style=color:#998;font-style:italic>// &#34;key=value&amp;key=other&#34; (همه موارد سریالایز شده)
</span></span></span></code></pre></div><p>در سناریوهای چند مقداری، <code>get</code> فقط اولین مقدار را برمی‌گرداند، در حالی که <code>toString</code> همه را سریالایز می‌کند.</p><hr><h2 id=راهحل-در-کد-ما>راه‌حل در کد ما <a href=#%d8%b1%d8%a7%d9%87%d8%ad%d9%84-%d8%af%d8%b1-%da%a9%d8%af-%d9%85%d8%a7 class=anchor>🔗</a></h2><p>در پروژه ما، مشکل را با اختصاص صریح <code>search</code> حل کردیم:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-1>1</a></span><span>url.search <span style=color:#000;font-weight:700>=</span> url.searchParams.toString()
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-2>2</a></span><span>url.searchParams.<span style=color:#000;font-weight:700>set</span>(
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-3>3</a></span><span>  <span style=color:#d14>&#34;hash&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-4>4</a></span><span>  cryptography.createSha256HmacBase64UrlSafe(url.href, SECRET_KEY <span style=color:#000;font-weight:700>??</span> <span style=color:#d14>&#34;&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-5>5</a></span><span>)
</span></span></code></pre></div><p>این اطمینان حاصل کرد که تمام پارامترهای کوئری قبل از اضافه کردن مقدار <code>hash</code> به درستی encode شده بودند.</p><hr><h2 id=ماژول-querystring-در-nodejs>ماژول <code>querystring</code> در Node.js <a href=#%d9%85%d8%a7%da%98%d9%88%d9%84-querystring-%d8%af%d8%b1-nodejs class=anchor>🔗</a></h2><p>رابط کاربری WHATWG <code>URLSearchParams</code> و <a href=https://nodejs.org/api/querystring.html target=_blank rel=noopener>ماژول <code>querystring</code></a> هدف مشابهی دارند، اما هدف ماژول <code>querystring</code> عمومی‌تر است، زیرا امکان سفارشی‌سازی کاراکترهای جداکننده (<code>&</code> و <code>=</code>) را فراهم می‌کند. از سوی دیگر، API <code>URLSearchParams</code> به طور خاص برای رشته‌های کوئری URL طراحی شده است.</p><p>ماژول <code>querystring</code> از <code>URLSearchParams</code> کارآمدتر است اما یک API استاندارد نیست. از <code>URLSearchParams</code> زمانی استفاده کنید که عملکرد بحرانی نیست یا وقتی سازگاری با کد مرورگر مطلوب است.</p><p>هنگام استفاده از <code>URLSearchParams</code> برخلاف ماژول <code>querystring</code>، کلیدهای تکراری به صورت آرایه مجاز نیستند. آرایه‌ها با استفاده از <code>()array.toString</code> سریالایز می‌شوند که به سادگی همه عناصر آرایه را با کاما جدا می‌کند.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-1>1</a></span><span><span style=color:#000;font-weight:700>const</span> params <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>new</span> URLSearchParams({
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-2>2</a></span><span>  user<span style=color:#000;font-weight:700>:</span> <span style=color:#d14>&#34;abc&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-3>3</a></span><span>  query<span style=color:#000;font-weight:700>:</span> [<span style=color:#d14>&#34;first&#34;</span>, <span style=color:#d14>&#34;second&#34;</span>],
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-4>4</a></span><span>})
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-5>5</a></span><span>console.log(params.getAll(<span style=color:#d14>&#34;query&#34;</span>))
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-6>6</a></span><span><span style=color:#998;font-style:italic>// Prints [ &#39;first,second&#39; ]
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-7>7</a></span><span><span style=color:#998;font-style:italic></span>console.log(params.toString())
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-8>8</a></span><span><span style=color:#998;font-style:italic>// Prints &#39;user=abc&amp;query=first%2Csecond&#39;
</span></span></span></code></pre></div><p>با ماژول <code>querystring</code>، رشته کوئری <code>'foo=bar&amp;abc=xyz&amp;abc=123'</code> به این صورت پارس می‌شود:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-1>1</a></span><span>{
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-2>2</a></span><span>  <span style=color:#d14>&#34;foo&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#d14>&#34;bar&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-3>3</a></span><span>  <span style=color:#d14>&#34;abc&#34;</span><span style=color:#000;font-weight:700>:</span> [<span style=color:#d14>&#34;xyz&#34;</span>, <span style=color:#d14>&#34;123&#34;</span>]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-4>4</a></span><span>}
</span></span></code></pre></div><hr><h2 id=نکات-کلیدی>نکات کلیدی <a href=#%d9%86%da%a9%d8%a7%d8%aa-%da%a9%d9%84%db%8c%d8%af%db%8c class=anchor>🔗</a></h2><ol><li><p>هنگام استفاده از <code>URLSearchParams</code> به نحوه مدیریت کاراکترهای خاص (مانند <code>~</code>) و فضاهای خالی توجه کنید. در صورت نیاز از <code>encodeURIComponent</code> استفاده کنید.</p></li><li><p>تفاوت بین <code>URL.search</code>، <code>URLSearchParams.get</code> و <code>URLSearchParams.toString</code> را برای جلوگیری از رفتار غیرمنتظره درک کنید.</p></li><li><p>در Node.js از ماژول <code>querystring</code> استفاده کنید اگر می‌خواهید پارامترهای کوئری تکراری را به عنوان یک آرایه پارس کنید.</p></li></ol><hr><p>منبع:
<a href=https://hamidreza.tech/pitfalls-of-url-and-urlsearchparams-in-nodejs target=_blank rel=noopener>Pitfalls of URL and URLSearchParams in JavaScript</a>
از وبلاگ
Software Alchemist</p></div><div class=tags><a href=https://yavarjs.ir/tags/javascript>javascript</a>
<a href=https://yavarjs.ir/tags/typescript>typescript</a>
<a href=https://yavarjs.ir/tags/node.js>node.js</a></div><script src=https://utteranc.es/client.js repo=yavarjs/utterances-comments issue-term=pathname theme=github-light crossorigin=anonymous async></script></section></main><footer id=footer><div class=copyright>مطالب با اشاره به یاvar به عنوان منبع قابل انتشارن.</p><p class=powerby>قدرت‌گرفته از <a href=http://www.gohugo.io/>Hugo</a> با تم <a href=https://github.com/yavarjs/hugo-theme-mini>mini</a></p></footer></body></html>